(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{21:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),o=a.n(l),c=a(11),u=a(12),i=a(16),s=a(15),m=(a(21),a(1)),p=function(e,t,a){return{data:[{x:e,y:t}],layout:{title:"Step Response",autoresize:!0,margin:{l:50,r:50,b:50,t:50,pad:5},xaxis:{type:"linear",autorange:!0}},config:{displayModeBar:!1},revision:a}},d=function(e,t,a,n,r){return{data:[{x:e,y:t,name:"Magnitude",xaxis:"x1",yaxis:"y1"},{x:e,y:a,name:"Phase",xaxis:"x2",yaxis:"y2"}],layout:{title:(r?"Closed-Loop":"Open-Loop")+" Bode Plot",autoresize:!0,margin:{l:50,r:50,b:50,t:50,pad:5},showlegend:!1,xaxis1:{type:"log",autorange:!0},xaxis2:{type:"log",autorange:!0},yaxis1:{title:{text:"Magnitude (dB)"}},yaxis2:{title:{text:"Phase (deg)"}},grid:{rows:2,columns:1,pattern:"independent"}},config:{displayModeBar:!1},revision:n}},g=[0,.0707070707070707,.1414141414141414,.2121212121212121,.2828282828282828,.35353535353535354,.4242424242424242,.4949494949494949,.5656565656565656,.6363636363636364,.7070707070707071,.7777777777777778,.8484848484848484,.9191919191919191,.9898989898989898,1.0606060606060606,1.1313131313131313,1.202020202020202,1.2727272727272727,1.3434343434343434,1.4141414141414141,1.4848484848484849,1.5555555555555556,1.6262626262626263,1.6969696969696968,1.7676767676767675,1.8383838383838382,1.909090909090909,1.9797979797979797,2.0505050505050506,2.121212121212121,2.191919191919192,2.2626262626262625,2.333333333333333,2.404040404040404,2.4747474747474745,2.5454545454545454,2.616161616161616,2.686868686868687,2.7575757575757573,2.8282828282828283,2.898989898989899,2.9696969696969697,3.04040404040404,3.111111111111111,3.1818181818181817,3.2525252525252526,3.323232323232323,3.3939393939393936,3.4646464646464645,3.535353535353535,3.606060606060606,3.6767676767676765,3.7474747474747474,3.818181818181818,3.888888888888889,3.9595959595959593,4.03030303030303,4.101010101010101,4.171717171717171,4.242424242424242,4.313131313131313,4.383838383838384,4.454545454545454,4.525252525252525,4.595959595959596,4.666666666666666,4.737373737373737,4.808080808080808,4.878787878787879,4.949494949494949,5.02020202020202,5.090909090909091,5.161616161616162,5.232323232323232,5.303030303030303,5.373737373737374,5.444444444444445,5.515151515151515,5.585858585858586,5.656565656565657,5.727272727272727,5.797979797979798,5.8686868686868685,5.9393939393939394,6.0101010101010095,6.08080808080808,6.151515151515151,6.222222222222222,6.292929292929292,6.363636363636363,6.434343434343434,6.505050505050505,6.575757575757575,6.646464646464646,6.717171717171717,6.787878787878787,6.858585858585858,6.929292929292929,7],b=[0,.0682652154318129,.13187029122567395,.1911333528179103,.24635080874340382,.2977988331445469,.3457347470764048,.39039830551678356,.4320128965182785,.4707866584999496,.5069135212668401,.5405741759640732,.5719369788168238,.601158793176286,.628385774083191,.6537540992729283,.6773906502784438,.6994136470375029,.7199332391783506,.7390520569411304,.7568657244905325,.7734633381870439,.788927912208909,.8033367937536102,.816762049895531,.8292708280346963,.8409256917394027,.8517849336624789,.8619028670962501,.8713300976244401,.880113776229698,.8882978351226841,.8959232074722339,.9030280321355938,.9096478444127042,.9158157537785995,.9215626094828681,.9269171548444292,.9319061710133439,.936554610918695,.9408857240724854,.9449211728537726,.9486811408546413,.9521844338299139,.9554485737555088,.9584898864658834,.9613235833088888,.963963837226438,.966423853641511,.9687159365060432,.9708515498400405,.9728413750697135,.9746953644514111,.976422790848559,.9780322941105629,.979531924285648,.9809291818837628,.9822310553909285,.9834440562226626,.9845742512912994,.9856272933500957,.9866084492658895,.9875226263617195,.9883743969611598,.9891680212571309,.9899074686195656,.9905964374485031,.9912383736719075,.9918364879807277,.9923937718874034,.9929130126881333,.9933968074037403,.9938475757688616,.9942675723344281,.9946588977439655,.995023509240117,.9953632304539347,.9956797605259045,.9959746826043205,.9962494717635179,.9965055023815643,.9967440550143127,.9969663228001947,.9971734174277899,.9973663746960175,.9975461596947605,.9977136716318328,.9978697483304335,.9980151704195803,.998150665238483,.9982769104743834,.9983945375520578,.9985041347919341,.9986062503526196,.998701394972556,.9987900445245151,.9988726423957119,.9989496017054372,.9990213073713047,.999088118034444],h=Object(n.createContext)();var f=function(e){var t=Object(n.useState)(0),a=Object(m.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)(p(g,b,0)),u=Object(m.a)(c,2),i=u[0],s=u[1],f=Object(n.useState)({status:!1}),E=Object(m.a)(f,2),v=E[0],y=E[1],O=Object(n.useState)({plotType:"step",num:[1],den:[1,1],isPID:!1,kp:1,ki:0,kd:0,isLeadLag:!1,kc:1,tauLead:0,tauLag:0}),j=Object(m.a)(O,2),k=j[0],x=j[1];return Object(n.useEffect)((function(){var e={plotType:k.plotType,num:k.num,den:k.den,isPID:k.isPID,kp:k.kp,ki:k.ki,kd:k.kd,isLeadLag:k.isLeadLag,kc:k.kc,tauLead:k.tauLead,tauLag:k.tauLag};fetch("https://controltheoryapi.pythonanywhere.com/plot?config="+JSON.stringify(e),{method:"get",mode:"cors"}).then((function(e){return e.json()})).then((function(t){"bode_ol"===e.plotType?(o(l+1),s(d(t.w,t.mag,t.phase,l,!1))):"bode_cl"===e.plotType?(o(l+1),s(d(t.w,t.mag,t.phase,l,!0))):"step"===e.plotType&&(o(l+1),s(p(t.t,t.y,l))),y({status:!1})})).catch((function(e){y({status:!0,message:0})}))}),[k]),r.a.createElement(h.Provider,{value:{plotData:i,error:v,setPlant:x,setError:y}},e.children)},E=function(e){for(var t=e.length,a="",n=0;n<e.length;n++)t-=1,0===e[n]&&0!==t||(1!==e[n]&&-1!==e[n]||0===t?a+="".concat(e[n],"s^").concat(t,"+"):a+="s^".concat(t,"+"));return a=(a=(a=(a=(a=a.substring(0,a.length-1)).replace("+0","")).replace("+-","-")).replace("s^0","")).replace("s^1","s")},v=function(e,t){var a=e.trim().split(" ").map((function(e){return parseFloat(e)})),n=t.trim().split(" ").map((function(e){return parseFloat(e)}));return a.some(isNaN)||n.some(isNaN)?"\\text{Error: coefficients must be numbers}":"\\frac{"+E(a)+"}{"+E(n)+"}"},y=a(22),O=y.Provider,j=y.Node;var k=function(e){return r.a.createElement(O,{options:{messageStyle:"none"}},r.a.createElement(j,null,v(e.num,e.den)))};var x=function(){var e=Object(n.useContext)(h),t=e.setPlant,a=e.setError,l=Object(n.useState)("1"),o=Object(m.a)(l,2),c=o[0],u=o[1],i=Object(n.useState)("1 1"),s=Object(m.a)(i,2),p=s[0],d=s[1],g=Object(n.useState)("step"),b=Object(m.a)(g,2),f=b[0],E=b[1],v=Object(n.useState)(!1),y=Object(m.a)(v,2),O=y[0],j=y[1],x=Object(n.useState)("1"),L=Object(m.a)(x,2),F=L[0],S=L[1],N=Object(n.useState)("0"),C=Object(m.a)(N,2),T=C[0],P=C[1],w=Object(n.useState)("0"),B=Object(m.a)(w,2),D=B[0],q=B[1],_=Object(n.useState)(!1),I=Object(m.a)(_,2),M=I[0],J=I[1],K=Object(n.useState)("1"),W=Object(m.a)(K,2),A=W[0],z=W[1],R=Object(n.useState)("0"),U=Object(m.a)(R,2),$=U[0],G=U[1],H=Object(n.useState)("0"),Q=Object(m.a)(H,2),V=Q[0],X=Q[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{id:"formWrapper",onSubmit:function(e){e.preventDefault();var n=c.trim().split(" ").map((function(e){return parseFloat(e)})),r=p.trim().split(" ").map((function(e){return parseFloat(e)})),l=parseFloat(F),o=parseFloat(T),u=parseFloat(D),i=parseFloat(A),s=parseFloat($),m=parseFloat(V);n.some(isNaN)||r.some(isNaN)||isNaN(l)||isNaN(o)||isNaN(u)?a({status:!0,message:1}):n.length>r.length?a({status:!0,message:2}):(a({status:!1}),t({plotType:f,num:n,den:r,isPID:O,kp:l,ki:o,kd:u,isLeadLag:M,kc:i,tauLead:s,tauLag:m}))}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Transfer function"),r.a.createElement("div",{id:"formTransferFunction"},r.a.createElement("label",{htmlFor:"num"},"Numerator"),r.a.createElement("input",{id:"num",type:"text",value:c,onChange:function(e){return u(e.target.value)},required:!0}),r.a.createElement("label",{htmlFor:"den"},"Denominator"),r.a.createElement("input",{id:"den",type:"text",value:p,onChange:function(e){return d(e.target.value)},required:!0})),r.a.createElement(k,{num:c,den:p})),r.a.createElement("fieldset",{disabled:!O},r.a.createElement("legend",null,r.a.createElement("input",{type:"checkbox",value:O,checked:O,onChange:function(e){j(e.target.checked),J(!1)}}),"PID"),r.a.createElement("div",{id:"formPID"},r.a.createElement("label",{htmlFor:"kp"},"Kp"),r.a.createElement("input",{id:"kp",type:"text",value:F,onChange:function(e){return S(e.target.value)},required:!0}),r.a.createElement("label",{htmlFor:"ki"},"Ki"),r.a.createElement("input",{id:"ki",type:"text",value:T,onChange:function(e){return P(e.target.value)},required:!0}),r.a.createElement("label",{htmlFor:"kd"},"Kd"),r.a.createElement("input",{id:"kd",type:"text",value:D,onChange:function(e){return q(e.target.value)},required:!0}))),r.a.createElement("fieldset",{disabled:!M},r.a.createElement("legend",null,r.a.createElement("input",{type:"checkbox",value:M,checked:M,onChange:function(e){J(e.target.checked),j(!1)}}),"Lead-Lag"),r.a.createElement("div",{id:"formLeadLag"},r.a.createElement("label",{htmlFor:"kc"},"Kc"),r.a.createElement("input",{id:"kc",type:"text",value:A,onChange:function(e){return z(e.target.value)},required:!0}),r.a.createElement("label",{htmlFor:"tauLead"},"\u03c4",r.a.createElement("sub",null,"lead")),r.a.createElement("input",{id:"tauLead",type:"text",value:$,onChange:function(e){return G(e.target.value)},required:!0}),r.a.createElement("label",{htmlFor:"tauLag"},"\u03c4",r.a.createElement("sub",null,"lag")),r.a.createElement("input",{id:"tauLag",type:"text",value:V,onChange:function(e){return X(e.target.value)},required:!0}))),r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Plot"),r.a.createElement("div",{id:"formPlot"},r.a.createElement("input",{type:"radio",id:"plotTypeStep",name:"step",value:"step",checked:"step"===f,onChange:function(e){return E(e.target.value)}}),r.a.createElement("label",{htmlFor:"plotTypeStep"},"Step"),r.a.createElement("input",{type:"radio",id:"plotTypeBodeOL",name:"bode_ol",value:"bode_ol",checked:"bode_ol"===f,onChange:function(e){return E(e.target.value)}}),r.a.createElement("label",{htmlFor:"plotTypeBodeOL"},"OL Bode"),r.a.createElement("input",{type:"radio",id:"plotTypeBodeCL",name:"bode_cl",value:"bode_cl",checked:"bode_cl"===f,onChange:function(e){return E(e.target.value)}}),r.a.createElement("label",{htmlFor:"plotTypeBodeCL"},"CL Bode"),r.a.createElement("div",null),r.a.createElement("button",{type:"submit",className:"buttonSubmit"},"Update plot")))))},L=a(13),F=a.n(L),S=a(14),N=a.n(S)()(F.a);var C=function(e){return r.a.createElement("div",{className:"overlay"},r.a.createElement("p",null,"Error : ",["cannot communicate with the server","coefficients must be numbers","transfer function must be proper"][e]))},T=function(){var e=Object(n.useContext)(h),t=e.plotData,a=e.error;return r.a.createElement("div",{className:"plot-container"},a.status?C(a.message):" ",r.a.createElement(N,{data:t.data,layout:t.layout,revision:t.revision,config:t.config,style:{width:"100%"}}))};var P=function(){return r.a.createElement("header",null,r.a.createElement("h1",null,r.a.createElement("a",{href:"../"},"Webapps")," ","/"," ",r.a.createElement("span",{className:"headerAppTitle"},"Control Theory Plot")))};var w=function(){return r.a.createElement("footer",null,"By ",r.a.createElement("a",{href:"https://odjadane.github.io"},"O. DJADANE"))},B=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P,null),r.a.createElement("div",{className:"container"},r.a.createElement(f,null,r.a.createElement(x,null),r.a.createElement(T,null))),r.a.createElement(w,null))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);